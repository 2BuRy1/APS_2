#set text(lang: "ru")
#set page(margin: 2.5cm)
#set heading(numbering: "1.")

#let itmo-title(title, subtitle: none, variant: none) = [
  #align(center)[
    #text(10pt)[Федеральное государственное автономное образовательное учреждение
высшего образования]
    #linebreak()
    #strong[#text(12pt)[Университет ИТМО]]
    #v(1.2cm)
    #text(11pt)[Дисциплина: Архитектура Программных Систем]
    #v(1.6cm)
    #strong[#text(16pt)[Лабораторная работа №1]]
    #v(0.3cm)
    #strong[#text(14pt)[#title]]
    #if subtitle != none [ #linebreak() #strong[#text(12pt)[#subtitle]] ]
    #if variant != none [ #v(0.3cm) #text(10pt)[#variant] ]
  ]
  #v(2.5cm)
  #align(right)[
    #text(11pt)[Выполнил:]
    #linebreak()
    #text(11pt)[Федоров Евгений]
    #linebreak()
    #text(11pt)[Группа: P3310]
    #v(0.8cm)
    #text(11pt)[Преподаватель:]
    #linebreak()
    #text(11pt)[Перл Иван Андреевич]
  ]
  #v(1fr)
  #align(center)[
    #text(11pt)[2025 г.]
    #linebreak()
    #text(11pt)[Санкт-Петербург]
  ]
]

#itmo-title("«Описание шаблонов проектирования", variant: none)
#pagebreak()

= Шаблоны проектирования

В работе выбраны 4 шаблона: два из GoF и два из GRASP.

== GoF

=== Strategy

- Сценарий: в POS автокредитовании нужно переключаться между программами с разным первоначальным взносом и субсидиями дилера без ветвления по типам. Ограничения: рост числа стратегий и необходимость синхронизации общего контракта при добавлении новых правил.
- Сценарий: в POS автокредитовании расчёт ставки и комиссий зависит от программы дилера, сегмента клиента и типа автомобиля (новый/б/у). Strategy позволяет выбирать алгоритм ценообразования без ветвления. Ограничения: рост числа стратегий и необходимость согласованного контракта параметров.
- Сценарий: разные каналы подачи заявки (салон, онлайн, партнёр) требуют разных стратегий скоринга и антифрода. Ограничения: риск расхождения бизнес-правил и усложнение тестирования разных моделей.
- Сценарий: формирование графика платежей может идти по стратегиям (аннуитет, дифференцированный, сезонные платежи) для POS автокредита. Ограничения: сложнее обеспечить единые требования к округлению и отчетности для всех вариантов.

=== Observer

- Сценарий: при смене статуса заявки на POS автокредит (создана, на проверке, одобрена, подписана) уведомляются дилер, клиент, бэк-офис и кредитное бюро. Ограничения: возможна лавина событий и сложнее контролировать порядок и атомарность обработки.
- Сценарий: при изменении условий одобрения (сумма, ставка, срок) подписчики обновляют предложение в POS, шаблон договора и расчёт комиссий. Ограничения: риск рассинхронизации представлений и сложность отладки каскадных обновлений.
- Сценарий: событие "кредит выдан" должно активировать страхование, постановку залога и проводки в учете. Ограничения: подписчики становятся зависимыми от консистентности событий и возможны повторные обработки.

== GRASP

=== Controller

- Сценарий: контроллер "Подать заявку на POS автокредит" координирует KYC, скоринг, резерв автомобиля и подготовку оффера. Ограничения: контроллер легко превращается в "божественный" объект при росте сценариев.
- Сценарий: контроллер "Выдача кредита" запускает формирование договора, перечисление средств дилеру и регистрацию залога. Ограничения: высокая связность с инфраструктурой и сложнее переиспользовать логику вне сценария.
- Сценарий: обработчик события "Отмена сделки" координирует откат оффера, снятие резерва и закрытие заявки. Ограничения: контроллер становится точкой концентрации зависимостей и усложняет изменение бизнес-процесса.

=== Creator

- Сценарий: заявка на POS автокредит создает кредитное предложение, так как владеет исходными данными и результатами скоринга. Ограничения: создание тесно связывается с агрегатом заявки и сложнее менять модель оффера.
- Сценарий: кредитный договор создает график платежей, поскольку содержит условия и правила начислений. Ограничения: тяжело заменить реализацию графика без изменения договора.
- Сценарий: сделка в POS создает пакет документов (договор, согласия, страховка), так как агрегирует все входные данные. Ограничения: при росте типов документов сделка превращается в фабрику с множеством зависимостей.
